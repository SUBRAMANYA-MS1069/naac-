{'role': 'assistant', 'content': '<function_calls>\n<create-file file_path="src/utils/validators/feeValidator.js">\nconst { body, query, param } = require(\'express-validator\');\n\nconst createFeeStructureValidator = [\n  body(\'structureName\')\n    .notEmpty()\n    .withMessage(\'Structure name is required\')\n    .isLength({ max: 100 })\n    .withMessage(\'Structure name must be less than 100 characters\'),\n  \n  body(\'academicYear\')\n    .notEmpty()\n    .withMessage(\'Academic year is required\')\n    .isLength({ max: 10 })\n    .withMessage(\'Academic year must be less than 10 characters\'),\n  \n  body(\'feeType\')\n    .notEmpty()\n    .withMessage(\'Fee type is required\')\n    .isIn([\'Tuition\', \'Admission\', \'Examination\', \'Library\', \'Laboratory\', \'Hostel\', \'Transport\', \'Other\'])\n    .withMessage(\'Invalid fee type\'),\n  \n  body(\'components\')\n    .isArray({ min: 1 })\n    .withMessage(\'At least one component is required\'),\n  \n  body(\'components.*.componentName\')\n    .notEmpty()\n    .withMessage(\'Component name is required\'),\n  \n  body(\'components.*.amount\')\n    .isNumeric()\n    .withMessage(\'Component amount must be a number\'),\n  \n  body(\'totalFee\')\n    .isNumeric()\n    .withMessage(\'Total fee must be a number\'),\n  \n  body(\'paymentSchedule\')\n    .isArray({ min: 1 })\n    .withMessage(\'At least one payment schedule is required\'),\n  \n  body(\'paymentSchedule.*.installmentNumber\')\n    .isInt({ min: 1 })\n    .withMessage(\'Installment number must be a positive integer\'),\n  \n  body(\'paymentSchedule.*.dueDate\')\n    .notEmpty()\n    .withMessage(\'Due date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'paymentSchedule.*.amount\')\n    .isNumeric()\n    .withMessage(\'Installment amount must be a number\'),\n  \n  body(\'effectiveFrom\')\n    .notEmpty()\n    .withMessage(\'Effective from date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\')\n];\n\nconst updateFeeStructureValidator = [\n  param(\'structureId\')\n    .notEmpty()\n    .withMessage(\'Structure ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid structure ID format\'),\n  \n  body(\'structureName\')\n    .optional()\n    .isLength({ max: 100 })\n    .withMessage(\'Structure name must be less than 100 characters\'),\n  \n  body(\'isActive\')\n    .optional()\n    .isBoolean()\n    .withMessage(\'isActive must be a boolean value\')\n];\n\nconst getFeeStructuresValidator = [\n  query(\'academicYear\')\n    .optional()\n    .isLength({ max: 10 })\n    .withMessage(\'Academic year must be less than 10 characters\'),\n  \n  query(\'program\')\n    .optional()\n    .isLength({ max: 50 })\n    .withMessage(\'Program must be less than 50 characters\'),\n  \n  query(\'active\')\n    .optional()\n    .isBoolean()\n    .withMessage(\'Active must be a boolean value\'),\n  \n  query(\'page\')\n    .optional()\n    .isInt({ min: 1 })\n    .withMessage(\'Page must be a positive integer\'),\n  \n  query(\'limit\')\n    .optional()\n    .isInt({ min: 1, max: 100 })\n    .withMessage(\'Limit must be between 1 and 100\')\n];\n\nconst getFeeStructureByIdValidator = [\n  param(\'structureId\')\n    .notEmpty()\n    .withMessage(\'Structure ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid structure ID format\')\n];\n\nconst generateFeeInvoiceValidator = [\n  body(\'studentId\')\n    .notEmpty()\n    .withMessage(\'Student ID is required\'),\n  \n  body(\'feeStructureId\')\n    .notEmpty()\n    .withMessage(\'Fee structure ID is required\'),\n  \n  body(\'academicYear\')\n    .notEmpty()\n    .withMessage(\'Academic year is required\')\n    .isLength({ max: 10 })\n    .withMessage(\'Academic year must be less than 10 characters\'),\n  \n  body(\'dueDate\')\n    .notEmpty()\n    .withMessage(\'Due date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\')\n];\n\nconst getStudentInvoicesValidator = [\n  param(\'studentId\')\n    .notEmpty()\n    .withMessage(\'Student ID is required\'),\n  \n  query(\'academicYear\')\n    .optional()\n    .isLength({ max: 10 })\n    .withMessage(\'Academic year must be less than 10 characters\'),\n  \n  query(\'status\')\n    .optional()\n    .isIn([\'Pending\', \'PartiallyPaid\', \'Paid\', \'Overdue\', \'Cancelled\'])\n    .withMessage(\'Invalid status\')\n];\n\nconst getInvoiceByIdValidator = [\n  param(\'invoiceId\')\n    .notEmpty()\n    .withMessage(\'Invoice ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid invoice ID format\')\n];\n\nconst recordFeePaymentValidator = [\n  body(\'invoiceId\')\n    .notEmpty()\n    .withMessage(\'Invoice ID is required\'),\n  \n  body(\'studentId\')\n    .notEmpty()\n    .withMessage(\'Student ID is required\'),\n  \n  body(\'paymentDate\')\n    .notEmpty()\n    .withMessage(\'Payment date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'paymentMode\')\n    .notEmpty()\n    .withMessage(\'Payment mode is required\')\n    .isIn([\'Cash\', \'Cheque\', \'DD\', \'NetBanking\', \'UPI\', \'Card\', \'OnlinePaymentGateway\'])\n    .withMessage(\'Invalid payment mode\'),\n  \n  body(\'amount\')\n    .isNumeric()\n    .withMessage(\'Amount must be a number\'),\n  \n  body(\'allocations\')\n    .isArray({ min: 1 })\n    .withMessage(\'At least one allocation is required\'),\n  \n  body(\'allocations.*.feeComponent\')\n    .notEmpty()\n    .withMessage(\'Fee component is required\'),\n  \n  body(\'allocations.*.amount\')\n    .isNumeric()\n    .withMessage(\'Allocation amount must be a number\')\n];\n\nconst getPaymentHistoryValidator = [\n  param(\'studentId\')\n    .notEmpty()\n    .withMessage(\'Student ID is required\')\n];\n\nconst initiateRefundValidator = [\n  body(\'studentId\')\n    .notEmpty()\n    .withMessage(\'Student ID is required\'),\n  \n  body(\'paymentId\')\n    .notEmpty()\n    .withMessage(\'Payment ID is required\'),\n  \n  body(\'refundAmount\')\n    .isNumeric()\n    .withMessage(\'Refund amount must be a number\'),\n  \n  body(\'refundReason\')\n    .notEmpty()\n    .withMessage(\'Refund reason is required\')\n    .isLength({ max: 500 })\n    .withMessage(\'Refund reason must be less than 500 characters\'),\n  \n  body(\'refundMode\')\n    .notEmpty()\n    .withMessage(\'Refund mode is required\')\n    .isIn([\'Cash\', \'Cheque\', \'BankTransfer\'])\n    .withMessage(\'Invalid refund mode\')\n];\n\nconst createScholarshipValidator = [\n  body(\'scholarshipName\')\n    .notEmpty()\n    .withMessage(\'Scholarship name is required\')\n    .isLength({ max: 100 })\n    .withMessage(\'Scholarship name must be less than 100 characters\'),\n  \n  body(\'scholarshipType\')\n    .notEmpty()\n    .withMessage(\'Scholarship type is required\')\n    .isIn([\'Merit\', \'NeedBased\', \'Sports\', \'Cultural\', \'Government\', \'Private\'])\n    .withMessage(\'Invalid scholarship type\'),\n  \n  body(\'academicYear\')\n    .notEmpty()\n    .withMessage(\'Academic year is required\')\n    .isLength({ max: 10 })\n    .withMessage(\'Academic year must be less than 10 characters\'),\n  \n  body(\'benefitType\')\n    .notEmpty()\n    .withMessage(\'Benefit type is required\')\n    .isIn([\'FullTuitionWaiver\', \'PartialTuitionWaiver\', \'Stipend\', \'FeeReduction\'])\n    .withMessage(\'Invalid benefit type\'),\n  \n  body(\'totalSlots\')\n    .isInt({ min: 1 })\n    .withMessage(\'Total slots must be a positive integer\'),\n  \n  body(\'applicationStartDate\')\n    .notEmpty()\n    .withMessage(\'Application start date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'applicationEndDate\')\n    .notEmpty()\n    .withMessage(\'Application end date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\')\n];\n\nconst applyForScholarshipValidator = [\n  body(\'scholarshipId\')\n    .notEmpty()\n    .withMessage(\'Scholarship ID is required\'),\n  \n  body(\'studentId\')\n    .notEmpty()\n    .withMessage(\'Student ID is required\'),\n  \n  body(\'applicationDate\')\n    .notEmpty()\n    .withMessage(\'Application date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'cgpa\')\n    .isNumeric()\n    .withMessage(\'CGPA must be a number\'),\n  \n  body(\'familyIncome\')\n    .isNumeric()\n    .withMessage(\'Family income must be a number\'),\n  \n  body(\'category\')\n    .notEmpty()\n    .withMessage(\'Category is required\')\n    .isIn([\'General\', \'OBC\', \'SC\', \'ST\', \'EWS\'])\n    .withMessage(\'Invalid category\')\n];\n\nconst getScholarshipApplicationsValidator = [\n  param(\'scholarshipId\')\n    .notEmpty()\n    .withMessage(\'Scholarship ID is required\'),\n  \n  query(\'status\')\n    .optional()\n    .isIn([\'Pending\', \'UnderReview\', \'Approved\', \'Rejected\'])\n    .withMessage(\'Invalid status\')\n];\n\nconst approveScholarshipApplicationValidator = [\n  param(\'applicationId\')\n    .notEmpty()\n    .withMessage(\'Application ID is required\'),\n  \n  body(\'action\')\n    .notEmpty()\n    .withMessage(\'Action is required\')\n    .isIn([\'Approve\', \'Reject\'])\n    .withMessage(\'Invalid action\'),\n  \n  body(\'approvedBy\')\n    .notEmpty()\n    .withMessage(\'Approved by is required\')\n];\n\nconst disburseScholarshipValidator = [\n  body(\'applicationId\')\n    .notEmpty()\n    .withMessage(\'Application ID is required\'),\n  \n  body(\'studentId\')\n    .notEmpty()\n    .withMessage(\'Student ID is required\'),\n  \n  body(\'amount\')\n    .isNumeric()\n    .withMessage(\'Amount must be a number\'),\n  \n  body(\'disbursementDate\')\n    .notEmpty()\n    .withMessage(\'Disbursement date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'disbursementMode\')\n    .notEmpty()\n    .withMessage(\'Disbursement mode is required\')\n    .isIn([\'DirectFeeWaiver\', \'BankTransfer\', \'Cheque\'])\n    .withMessage(\'Invalid disbursement mode\')\n];\n\nmodule.exports = {\n  createFeeStructureValidator,\n  updateFeeStructureValidator,\n  getFeeStructuresValidator,\n  getFeeStructureByIdValidator,\n  generateFeeInvoiceValidator,\n  getStudentInvoicesValidator,\n  getInvoiceByIdValidator,\n  recordFeePaymentValidator,\n  getPaymentHistoryValidator,\n  initiateRefundValidator,\n  createScholarshipValidator,\n  applyForScholarshipValidator,\n  getScholarshipApplicationsValidator,\n  approveScholarshipApplicationValidator,\n  disburseScholarshipValidator\n};\n</create-file>\n</function_calls>'}