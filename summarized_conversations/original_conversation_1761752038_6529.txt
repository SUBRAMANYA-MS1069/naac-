{'role': 'assistant', 'content': 'Let\'s continue creating the remaining services:\n\n<function_calls>\n<create-file file_path="src/services/budget/budgetAlertService.js">\nconst BudgetAlert = require(\'../../models/budget/BudgetAlert\');\nconst { generateBudgetAlert } = require(\'../../utils/calculators/budgetCalculator\');\nconst { AppError } = require(\'../../utils/helpers/errorHelper\');\n\n/**\n * Create budget alert\n * @param {Object} alertData - Alert data\n * @param {String} tenantId - Tenant ID\n * @returns {Object} Created alert\n */\nconst createBudgetAlert = async (alertData, tenantId) => {\n  try {\n    // Add tenantId to alert data\n    alertData.tenantId = tenantId;\n    \n    // Create alert\n    const alert = new BudgetAlert(alertData);\n    await alert.save();\n    \n    return alert;\n  } catch (error) {\n    if (error.code === 11000) {\n      throw new AppError(\'Budget alert already exists\', 409, \'DUPLICATE_BUDGET_ALERT\');\n    }\n    throw error;\n  }\n};\n\n/**\n * Get budget alerts\n * @param {String} budgetId - Budget ID\n * @param {String} tenantId - Tenant ID\n * @returns {Array} Budget alerts\n */\nconst getBudgetAlerts = async (budgetId, tenantId) => {\n  try {\n    const alerts = await BudgetAlert.find({ budgetId, tenantId, isActive: true });\n    return alerts;\n  } catch (error) {\n    throw new AppError(\'Failed to fetch budget alerts\', 500, \'FETCH_BUDGET_ALERTS_ERROR\');\n  }\n};\n\n/**\n * Update budget alert\n * @param {String} alertId - Alert ID\n * @param {Object} updateData - Update data\n * @param {String} tenantId - Tenant ID\n * @returns {Object} Updated alert\n */\nconst updateBudgetAlert = async (alertId, updateData, tenantId) => {\n  try {\n    const alert = await BudgetAlert.findOneAndUpdate(\n      { budgetAlertId: alertId, tenantId },\n      updateData,\n      { new: true, runValidators: true }\n    );\n    \n    if (!alert) {\n      throw new AppError(\'Budget alert not found\', 404, \'BUDGET_ALERT_NOT_FOUND\');\n    }\n    \n    return alert;\n  } catch (error) {\n    if (error.name === \'CastError\') {\n      throw new AppError(\'Invalid budget alert ID\', 400, \'INVALID_BUDGET_ALERT_ID\');\n    }\n    throw error;\n  }\n};\n\n/**\n * Delete budget alert (soft delete)\n * @param {String} alertId - Alert ID\n * @param {String} tenantId - Tenant ID\n * @returns {Object} Deletion result\n */\nconst deleteBudgetAlert = async (alertId, tenantId) => {\n  try {\n    const alert = await BudgetAlert.findOneAndUpdate(\n      { budgetAlertId: alertId, tenantId },\n      { isActive: false },\n      { new: true }\n    );\n    \n    if (!alert) {\n      throw new AppError(\'Budget alert not found\', 404, \'BUDGET_ALERT_NOT_FOUND\');\n    }\n    \n    return {\n      message: \'Budget alert deleted successfully\',\n      alert\n    };\n  } catch (error) {\n    if (error.name === \'CastError\') {\n      throw new AppError(\'Invalid budget alert ID\', 400, \'INVALID_BUDGET_ALERT_ID\');\n    }\n    throw error;\n  }\n};\n\n/**\n * Check budget thresholds and generate alerts\n * @param {String} budgetId - Budget ID\n * @param {String} tenantId - Tenant ID\n * @returns {Array} Generated alerts\n */\nconst checkBudgetThresholds = async (budgetId, tenantId) => {\n  try {\n    // In a real implementation, you would:\n    // 1. Get current budget utilization\n    // 2. Compare with alert thresholds\n    // 3. Generate alerts for thresholds that are crossed\n    \n    // For now, we\'ll return placeholder data\n    const alerts = [];\n    \n    // Example alert generation logic\n    const utilizationPercentage = Math.random() * 100; // Random utilization for demo\n    \n    const alertInfo = generateBudgetAlert(utilizationPercentage, 80);\n    \n    if (alertInfo.alertType) {\n      const alert = new BudgetAlert({\n        tenantId,\n        budgetId,\n        alertType: alertInfo.alertType,\n        threshold: 80,\n        recipients: [], // Would be populated with actual recipients\n        frequency: \'Daily\',\n        isActive: true\n      });\n      \n      await alert.save();\n      alerts.push(alert);\n    }\n    \n    return alerts;\n  } catch (error) {\n    throw new AppError(\'Failed to check budget thresholds\', 500, \'CHECK_BUDGET_THRESHOLDS_ERROR\');\n  }\n};\n\nmodule.exports = {\n  createBudgetA...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761751819_4087.txt'}