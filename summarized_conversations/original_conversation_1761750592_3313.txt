{'role': 'assistant', 'content': 'Let\'s create the budget controller:\n\n<function_calls>\n<create-file file_path="src/controllers/budget/budgetController.js">\nconst budgetService = require(\'../../services/budget/budgetService\');\nconst { successResponse, errorResponse, paginatedResponse } = require(\'../../utils/helpers/responseHelper\');\nconst { getPagination } = require(\'../../utils/helpers/paginationHelper\');\n\n/**\n * Create a new budget\n * @route POST /api/v1/finance/budgets\n * @access Private (Finance Manager)\n */\nconst createBudget = async (req, res, next) => {\n  try {\n    const budget = await budgetService.createBudget(req.body, req.tenantId, req.user.userId);\n    res.status(201).json(successResponse(budget, \'Budget created successfully\', 201));\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * Get all budgets\n * @route GET /api/v1/finance/budgets\n * @access Private (Finance Manager, Auditor)\n */\nconst getBudgets = async (req, res, next) => {\n  try {\n    const pagination = getPagination(req.query);\n    const filters = {\n      status: req.query.status,\n      financialYear: req.query.financialYear\n    };\n    \n    const result = await budgetService.getBudgets(filters, pagination, req.tenantId);\n    \n    res.json(paginatedResponse(\n      result.budgets,\n      result.page,\n      result.limit,\n      result.total,\n      \'Budgets retrieved successfully\'\n    ));\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * Get budget by ID\n * @route GET /api/v1/finance/budgets/:budgetId\n * @access Private (Finance Manager, Auditor)\n */\nconst getBudgetById = async (req, res, next) => {\n  try {\n    const budget = await budgetService.getBudgetById(req.params.budgetId, req.tenantId);\n    res.json(successResponse(budget, \'Budget retrieved successfully\'));\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * Update budget\n * @route PUT /api/v1/finance/budgets/:budgetId\n * @access Private (Finance Manager)\n */\nconst updateBudget = async (req, res, next) => {\n  try {\n    const budget = await budgetService.updateBudget(req.params.budgetId, req.body, req.tenantId);\n    res.json(successResponse(budget, \'Budget updated successfully\'));\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * Submit budget for approval\n * @route POST /api/v1/finance/budgets/:budgetId/submit\n * @access Private (Finance Manager)\n */\nconst submitBudget = async (req, res, next) => {\n  try {\n    const budget = await budgetService.submitBudget(\n      req.params.budgetId,\n      req.body.submittedBy,\n      req.body.submittedDate,\n      req.tenantId\n    );\n    res.json(successResponse(budget, \'Budget submitted for approval successfully\'));\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * Approve budget\n * @route POST /api/v1/finance/budgets/:budgetId/approve\n * @access Private (Admin, Finance Manager)\n */\nconst approveBudget = async (req, res, next) => {\n  try {\n    const budget = await budgetService.approveBudget(\n      req.params.budgetId,\n      req.body.approvedBy,\n      req.body.approvedDate,\n      req.tenantId\n    );\n    res.json(successResponse(budget, \'Budget approved successfully\'));\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * Activate budget\n * @route POST /api/v1/finance/budgets/:budgetId/activate\n * @access Private (Finance Manager)\n */\nconst activateBudget = async (req, res, next) => {\n  try {\n    const budget = await budgetService.activateBudget(req.params.budgetId, req.tenantId);\n    res.json(successResponse(budget, \'Budget activated successfully\'));\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * Close budget\n * @route POST /api/v1/finance/budgets/:budgetId/close\n * @access Private (Finance Manager)\n */\nconst closeBudget = async (req, res, next) => {\n  try {\n    const budget = await budgetService.closeBudget(\n      req.params.budgetId,\n      req.body.closedBy,\n      req.body.closedDate,\n      req.body.closureReason,\n      req.tenantId\n    );\n    res.json(successResponse(budget, \'Budget closed successfully\'));\n  } catch (error) {\n    next(error);\n  }\n};\n\nmodule.exports = {\n  createBudget,\n  getBudgets,\n  getBudgetById,\n  updateBudget,\n  submitBudget,\n  approveBudget,\n  activateBudget,\n...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761750383_8343.txt'}