{'role': 'assistant', 'content': '<function_calls>\n<create-file file_path="src/utils/validators/budgetValidator.js">\nconst { body, query, param } = require(\'express-validator\');\n\nconst createBudgetValidator = [\n  body(\'budgetName\')\n    .notEmpty()\n    .withMessage(\'Budget name is required\')\n    .isLength({ max: 100 })\n    .withMessage(\'Budget name must be less than 100 characters\'),\n  \n  body(\'financialYear\')\n    .notEmpty()\n    .withMessage(\'Financial year is required\')\n    .isLength({ max: 10 })\n    .withMessage(\'Financial year must be less than 10 characters\'),\n  \n  body(\'budgetType\')\n    .notEmpty()\n    .withMessage(\'Budget type is required\')\n    .isIn([\'Annual\', \'Quarterly\', \'Project\', \'Department\'])\n    .withMessage(\'Invalid budget type\'),\n  \n  body(\'startDate\')\n    .notEmpty()\n    .withMessage(\'Start date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'endDate\')\n    .notEmpty()\n    .withMessage(\'End date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'budgetLines\')\n    .isArray({ min: 1 })\n    .withMessage(\'At least one budget line is required\'),\n  \n  body(\'budgetLines.*.accountId\')\n    .notEmpty()\n    .withMessage(\'Account ID is required for budget lines\'),\n  \n  body(\'budgetLines.*.accountName\')\n    .notEmpty()\n    .withMessage(\'Account name is required for budget lines\'),\n  \n  body(\'budgetLines.*.budgetCategory\')\n    .notEmpty()\n    .withMessage(\'Budget category is required for budget lines\')\n    .isIn([\'Income\', \'Expense\'])\n    .withMessage(\'Invalid budget category\'),\n  \n  body(\'budgetLines.*.quarters\')\n    .isArray({ min: 1 })\n    .withMessage(\'At least one quarter is required for budget lines\'),\n  \n  body(\'budgetLines.*.quarters.*.quarter\')\n    .isInt({ min: 1, max: 4 })\n    .withMessage(\'Quarter must be between 1 and 4\'),\n  \n  body(\'budgetLines.*.quarters.*.amount\')\n    .isNumeric()\n    .withMessage(\'Quarter amount must be a number\'),\n  \n  body(\'budgetLines.*.totalBudget\')\n    .isNumeric()\n    .withMessage(\'Total budget must be a number\'),\n  \n  body(\'totalIncome\')\n    .optional()\n    .isNumeric()\n    .withMessage(\'Total income must be a number\'),\n  \n  body(\'totalExpense\')\n    .optional()\n    .isNumeric()\n    .withMessage(\'Total expense must be a number\'),\n  \n  body(\'netBudget\')\n    .optional()\n    .isNumeric()\n    .withMessage(\'Net budget must be a number\')\n];\n\nconst updateBudgetValidator = [\n  param(\'budgetId\')\n    .notEmpty()\n    .withMessage(\'Budget ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid budget ID format\'),\n  \n  body(\'budgetName\')\n    .optional()\n    .isLength({ max: 100 })\n    .withMessage(\'Budget name must be less than 100 characters\'),\n  \n  body(\'status\')\n    .optional()\n    .isIn([\'Draft\', \'Submitted\', \'Approved\', \'Active\', \'Rejected\', \'Closed\'])\n    .withMessage(\'Invalid status\')\n];\n\nconst getBudgetsValidator = [\n  query(\'financialYear\')\n    .optional()\n    .isLength({ max: 10 })\n    .withMessage(\'Financial year must be less than 10 characters\'),\n  \n  query(\'status\')\n    .optional()\n    .isIn([\'Draft\', \'Submitted\', \'Approved\', \'Active\', \'Rejected\', \'Closed\'])\n    .withMessage(\'Invalid status\'),\n  \n  query(\'department\')\n    .optional()\n    .isLength({ max: 50 })\n    .withMessage(\'Department must be less than 50 characters\'),\n  \n  query(\'page\')\n    .optional()\n    .isInt({ min: 1 })\n    .withMessage(\'Page must be a positive integer\'),\n  \n  query(\'limit\')\n    .optional()\n    .isInt({ min: 1, max: 100 })\n    .withMessage(\'Limit must be between 1 and 100\')\n];\n\nconst getBudgetByIdValidator = [\n  param(\'budgetId\')\n    .notEmpty()\n    .withMessage(\'Budget ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid budget ID format\')\n];\n\nconst submitBudgetValidator = [\n  param(\'budgetId\')\n    .notEmpty()\n    .withMessage(\'Budget ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid budget ID format\'),\n  \n  body(\'submittedBy\')\n    .notEmpty()\n    .withMessage(\'Submitted by is required\'),\n  \n  body(\'submittedDate\')\n    .notEmpty()\n    .withMessage(\'Submitted date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\')\n];\n\nconst approveBudgetValidator = [\n  param(\'budgetId\')\n    .notEmpty()\n    .withMessage(\'Budget ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid budget ID format\'),\n  \n  body(\'action\')\n    .notEmpty()\n    .withMessage(\'Action is required\')\n    .isIn([\'Approve\', \'Reject\', \'RequestRevision\'])\n    .withMessage(\'Invalid action\'),\n  \n  body(\'approvedBy\')\n    .notEmpty()\n    .withMessage(\'Approved by is required\')\n];\n\nconst getBudgetVsActualValidator = [\n  param(\'budgetId\')\n    .notEmpty()\n    .withMessage(\'Budget ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid budget ID format\'),\n  \n  query(\'asOfDate\')\n    .optional()\n    .isISO8601()\n    .withMessage(\'Invalid date format\')\n];\n\nconst setBudgetAlertValidator = [\n  param(\'budgetId\')\n    .notEmpty()\n    .withMessage(\'Budget ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid budget ID format\'),\n  \n  body(\'alertType\')\n    .notEmpty()\n    .withMessage(\'Alert type is required\')\n    .isIn([\'ThresholdReached\', \'QuarterlyReview\', \'MonthEnd\'])\n    .withMessage(\'Invalid alert type\'),\n  \n  body(\'threshold\')\n    .isInt({ min: 0, max: 100 })\n    .withMessage(\'Threshold must be between 0 and 100\'),\n  \n  body(\'frequency\')\n    .notEmpty()\n    .withMessage(\'Frequency is required\')\n    .isIn([\'Daily\', \'Weekly\', \'Monthly\'])\n    .withMessage(\'Invalid frequency\')\n];\n\nconst createBudgetRevisionValidator = [\n  param(\'budgetId\')\n    .notEmpty()\n    .withMessage(\'Budget ID is required\')\n    .isUUID()\n    .withMessage(\'Invalid budget ID format\'),\n  \n  body(\'revisionNumber\')\n    .isInt({ min: 1 })\n    .withMessage(\'Revision number must be a positive integer\'),\n  \n  body(\'revisionDate\')\n    .notEmpty()\n    .withMessage(\'Revision date is required\')\n    .isISO8601()\n    .withMessage(\'Invalid date format\'),\n  \n  body(\'reason\')\n    .notEmpty()\n    .withMessage(\'Reason is required\')\n    .isLength({ max: 500 })\n    .withMessage(\'Reason must be less than 500 characters\'),\n  \n  body(\'changes\')\n    .isArray({ min: 1 })\n    .withMessage(\'At least one change is required\'),\n  \n  body(\'changes.*.accountId\')\n    .notEmpty()\n    .withMessage(\'Account ID is required for changes\'),\n  \n  body(\'changes.*.oldAmount\')\n    .isNumeric()\n    .withMessage(\'Old amount must be a number\'),\n  \n  body(\'changes.*.newAmount\')\n    .isNumeric()\n    .withMessage(\'New amount must be a number\'),\n  \n  body(\'changes.*.justification\')\n    .notEmpty()\n    .withMessage(\'Justification is required\')\n    .isLength({ max: 500 })\n    .withMessage(\'Justification must be less than 500 characters\')\n];\n\nmodule.exports = {\n  createBudgetValidator,\n  updateBudgetValidator,\n  getBudgetsValidator,\n  getBudgetByIdValidator,\n  submitBudgetValidator,\n  approveBudgetValidator,\n  getBudgetVsActualValidator,\n  setBudgetAlertValidator,\n  createBudgetRevisionValidator\n};\n</create-file>\n</function_calls>'}